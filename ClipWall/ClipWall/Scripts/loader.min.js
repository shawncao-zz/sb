var ClipWall,loaded,panel;(function(n){var t,i;(function(n){n.d=document;n.w=window;n.b=n.d.body||n.gt("body")[0];n.ie=!!n.w.ActiveXObject;n.ie6=n.ie&&!n.w.XMLHttpRequest;n.st=function(t,i){return n.w.setTimeout(t,i)};n.ge=function(t){return n.d.getElementById(t)};n.gt=function(t){return n.d.getElementsByTagName(t)};n.ce=function(t){return n.d.createElement(t)};n.gat=function(n,t){return n.getAttribute(t)};n.sat=function(n,t,i){return n.setAttribute(t,i)};n.h="http://localhost:22128/"})(n.g||(n.g={}));t=n.g,function(n){function r(n){for(var r,u,f=[],t=0;t<arguments.length-1;t++)f[t]=arguments[t+1];if(r=i[n],r)for(u=0;u<r.length;u++)r[u](f)}function u(n,t){var r=i[n];r||(r=[]);r.push(t);i[n]=r}function f(n,t){var u=i[n],r;if(u)for(r=0;r<u.length;r++)u[r]==t&&u.splice(r,1)}function e(n,t,i){if(n.addEventListener){n.addEventListener(t,i);return}if(n.attachEvent){n.attachEvent("on"+t,i);return}n["on"+t]=i}function o(n,t,i){if(n.removeEventListener){n.removeEventListener(t,i);return}if(n.detachEvent){n.detachEvent("on"+t,i);return}n["on"+t]=null}function s(n,i){if(n.dispatchEvent){var r=t.d.createEvent("HTMLEvents");r.initEvent(i.type,!0,!1);n.dispatchEvent(r)}else n.fireEvent&&n.fireEvent("on"+i.type)}var i={};n.fire=r;n.bind=u;n.unbind=f;n.be=e;n.ue=o;n.trigger=s}(n.e||(n.e={}));i=n.e})(ClipWall||(ClipWall={})),function(n){(function(t){function u(t){var i=t||n.g.w.event;return i.target||(i.target=i.srcElement),i}function f(t){return n.g.h+t}function e(n,t){if(n&&t)while(t){if(n==t)return!0;t=t.parentElement}return!1}function o(n){n.stopImmediatePropagation();n.preventDefault()}function s(n){for(var u,t=[],f=0;f<arguments.length-1;f++)t[f]=arguments[f+1];if(!i(t))return n;if(r(n))return t.join("");for(u=0;u<t.length;++u)n=n.replace(new RegExp("\\{"+u+"\\}","gm"),t[u]);return n}function r(n){return!i(n)||n.length===0}function i(n){return n!==null&&typeof n!="undefined"}function h(n,t){typeof n.onselectstart!="undefined"?n.onselectstart=t?function(){return!1}:null:typeof n.style.MozUserSelect!="undefined"&&(n.style.MozUserSelect=t?"none":null)}t.evt=u;t.fullpath=f;t.contains=e;t.stop=o;t.format=s;t.empty=r;t.valid=i;t.mouseselect=h})(n.u||(n.u={}));var t=n.u}(ClipWall||(ClipWall={})),function(n){(function(t){function f(t){var i=n.g.ce("link");n.g.sat(i,"type","text/css");n.g.sat(i,"rel","stylesheet");n.g.sat(i,"href",n.u.fullpath(t));n.g.gt("body")[0].appendChild(i)}function r(n,t){i(n,t)||(n.className+=" "+t)}function u(n,t){if(i(n,t)){var r=n.className.split(" "),u=r.indexOf(t);u>=0&&r.splice(u,1);n.className=r.join(" ")}}function e(n,t){i(n,t)?u(n,t):r(n,t)}function i(n,t){var i=n.className.split(" ");return i.indexOf(t)>=0}function o(n,t){typeof t=="undefined"&&(t=!0);n.style.display=t?"block":"none"}t.load=f;t.add=r;t.remove=u;t.toggle=e;t.contains=i;t.show=o})(n.Css||(n.Css={}));var t=n.Css}(ClipWall||(ClipWall={})),function(n){var t=function(){function t(){this.modes=[];this.mLeft=["0","-300px"];this.mIndex=0;this.panel=n.g.ce("div");n.g.sat(this.panel,"class","panel");this.panel.innerHTML="<div id='cnt' class='left'><\/div><div class='right'><ul><li class='b_expand' onclick='panel.menuClick(this);' /><li class='b_pick' onclick='panel.menuClick(this);' /><li class='b_select' onclick='panel.menuClick(this);' /><li class='b_login' onclick='panel.menuClick(this);' /><\/ul><\/div>";n.g.b.insertBefore(this.panel,n.g.b.firstChild);n.e.bind("addcontent",function(t){n.g.ge("cnt").innerHTML+="<br/>"+t[0]});this.createMode()}return t.CreatePanel=function(){return new t},t.prototype.createMode=function(){var t=new n.SelectMode(this.panel);t.apply();this.modes.push(t);this.modes.push(new n.ClickMode(this.panel))},t.prototype.menuClick=function(n){switch(n.className){case"b_expand":this.clickExpand();break;case"b_pick":this.clickPickMode();break;case"b_select":this.clickSelectMode();break;case"b_login":this.clickLogin()}},t.prototype.clickExpand=function(){this.panel.style.marginLeft=this.mLeft[this.mIndex];this.mIndex=(this.mIndex+1)%this.mLeft.length},t.prototype.clickPickMode=function(){var t=this.getMode(n.ClickMode.Name);if(t==null)throw new Error("this mode is not supported");this.disposeAll();t.apply()},t.prototype.clickSelectMode=function(){var t=this.getMode(n.SelectMode.Name);if(t==null)throw new Error("this mode is not supported");this.disposeAll();t.apply()},t.prototype.clickLogin=function(){},t.prototype.getMode=function(n){for(var t=0;t<this.modes.length;++t)if(this.modes[t].name===n)return this.modes[t];return null},t.prototype.disposeAll=function(){for(var n=0;n<this.modes.length;++n)this.modes[n].dispose()},t}();n.Panel=t}(ClipWall||(ClipWall={})),function(n){function i(i){var u=n.g.ce("div"),r;return i===n.g.b?n.g.sat(u,"class","greyout"):(r={top:0,left:0,width:0,height:0},n.u.valid(i)&&(r=i.getBoundingClientRect()),n.g.sat(u,"class","overlay"),n.g.sat(u,"style",n.u.format(t,r.top.toString(),r.left.toString(),r.width.toString(),r.height.toString()))),n.g.b.appendChild(u),u}function r(n,t,i,r,u){i!==0&&(n.style.top=parseInt(n.style.top)+i+"px");t!==0&&(n.style.left=parseInt(n.style.left)+t+"px");r!==0&&(n.style.width=parseInt(n.style.width)+r+"px");u!==0&&(n.style.height=parseInt(n.style.height)+u+"px")}var t="top:{0}px;left:{1}px;width:{2}px;height:{3}px";n.createOverlay=i;n.updateOverlay=r}(ClipWall||(ClipWall={})),function(n){(function(t){var r=function(){function n(n,t){this.key=n;this.value=t}return n}(),i,u;t.KeyValuePair=r;i=function(){function t(){this.data=[]}return t.prototype.add=function(t){n.u.valid(t)&&this.data.push(t)},t.prototype.remove=function(n){var t=this.indexOf(n);t!=-1&&this.removeAt(t)},t.prototype.removeAt=function(n){n>=0&&n<this.count&&this.data.splice(n,1)},t.prototype.item=function(n){return n>=0&&n<this.count?this.data[n]:null},t.prototype.indexOf=function(n){for(var i=-1,t=0;t<this.count;t++)if(n===this.data[t]){i=t;break}return i},Object.defineProperty(t.prototype,"count",{get:function(){return this.data.length},enumerable:!0,configurable:!0}),t}();t.List=i;u=function(){function t(){this.keys=new i;this.values=new i}return t.prototype.add=function(t,i){n.u.valid(t)&&n.u.valid(i)&&!this.containsKey(t)&&(this.keys.add(t),this.values.add(i))},t.prototype.containsKey=function(t){return n.u.valid(t)?this.keys.indexOf(t)!=-1:!1},t.prototype.containsValue=function(t){return n.u.valid(t)?this.values.indexOf(t)!=-1:!1},t.prototype.remove=function(n){this.removeAt(this.keys.indexOf(n))},t.prototype.removeAt=function(n){n>=0&&n<this.count&&(this.keys.removeAt(n),this.values.removeAt(n))},t.prototype.pair=function(n){return n>=0&&n<this.count?new r(this.keys.item(n),this.values.item(n)):null},Object.defineProperty(t.prototype,"count",{get:function(){return this.keys.count},enumerable:!0,configurable:!0}),t}();t.Dictionary=u})(n.c||(n.c={}));var t=n.c}(ClipWall||(ClipWall={})),function(n){var t=function(){function n(n,t){typeof n=="undefined"&&(n=0);typeof t=="undefined"&&(t=0);this.x=n;this.y=t}return n.from=function(t){return new n(t.clientX,t.clientY)},n.prototype.substract=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.dist=function(n){var t=this.substract(n);return Math.sqrt(t.x*t.x+t.y*t.y)},n}();n.Point=t}(ClipWall||(ClipWall={})),function(n){var t=function(){function t(t){var i=this;this.panel=t;this.selections=new n.c.Dictionary;this.overlays=new n.c.List;this.moflag=!0;this.mouseOver=function(t){i.moflag&&(i.moflag=!1,n.g.st(function(){i.moflag=!0},300),i.overTarget(n.u.evt(t).target),n.u.stop(t))};this.mouseClick=function(t){i.clickOverlay(n.u.evt(t).target);n.u.stop(t)};this.scroll=function(){i.updateSelections()}}return Object.defineProperty(t.prototype,"name",{get:function(){return t.Name},enumerable:!0,configurable:!0}),t.prototype.apply=function(){this.initOffset=new n.Point(n.g.w.pageXOffset,n.g.w.pageYOffset);this.hook(!0)},t.prototype.dispose=function(){this.hook(!1)},t.prototype.hook=function(t){var i=t?n.e.be:n.e.ue;i(n.g.b,"mouseover",this.mouseOver);i(n.g.w,"scroll",this.scroll);n.u.mouseselect(n.g.b,t)},t.prototype.overTarget=function(t){if(!this.lastFocus||!n.u.contains(this.lastFocus.value,t)){if(n.g.b.clientWidth<=t.clientWidth+10||n.g.b.clientHeight<=t.clientHeight+10||n.u.empty(t.innerText)||this.onlyDivChildren(t)){this.removeLastIfNotSelected();return}if(!n.u.valid(this.lastFocus)){this.lastFocus=new n.c.KeyValuePair(this.greyout(t),t);return}t!=this.lastFocus.value&&(this.removeLastIfNotSelected(),this.selections.containsValue(t)||(this.lastFocus=new n.c.KeyValuePair(this.greyout(t),t)))}},t.prototype.greyout=function(t){var i=n.createOverlay(t);return this.overlays.add(i),n.e.be(i,"click",this.mouseClick),i},t.prototype.clickOverlay=function(t){this.selections.containsKey(t)?this.removeSelection(t):this.lastFocus&&this.lastFocus.key==t&&(this.removeChildren(this.lastFocus.value),this.selections.add(this.lastFocus.key,this.lastFocus.value),n.e.fire("addcontent",this.lastFocus.value.innerHTML))},t.prototype.removeLastIfNotSelected=function(){n.u.valid(this.lastFocus)&&!this.selections.containsKey(this.lastFocus.key)&&(this.removeElement(this.lastFocus.key),this.lastFocus=null)},t.prototype.removeChildren=function(t){for(var r,i=this.selections.count-1;i>=0;i--)r=this.selections.pair(i),n.u.contains(t,r.value)&&this.removeSelection(r.key)},t.prototype.removeSelection=function(n){this.selections.remove(n);this.removeElement(n)},t.prototype.removeElement=function(t){var i=this.overlays.indexOf(t);i!==-1&&(this.overlays.removeAt(i),n.g.b.removeChild(t))},t.prototype.updateSelections=function(){var i,r,t;for(this.removeLastIfNotSelected(),i=new n.Point(pageXOffset,pageYOffset),r=i.substract(this.initOffset),this.initOffset=i,t=0;t<this.selections.count;t++)n.updateOverlay(this.selections.pair(t).key,-r.x,-r.y,0,0)},t.prototype.onlyDivChildren=function(n){if(n.childElementCount==0)return!1;if(n.childElementCount>10)return!0;for(var t=0;t<n.children.length;t++)if(n.children.item(t).tagName!=="DIV")return!1;return!0},t.Name="m_clk",t}();n.ClickMode=t}(ClipWall||(ClipWall={})),function(n){var t=function(){function t(t,i,r){var u=this;this._flag=0;this.onstart=t;this.onselecting=i;this.onselected=r;this.mouseDown=function(t){u._target=n.u.evt(t).target;u._position=n.Point.from(t);u._flag===0&&(u._flag=1);n.u.valid(u.onstart)&&u.onstart(u)&&n.u.stop(t)};this.mouseMove=function(t){u._flag!=0&&(u._position=n.Point.from(t),u._flag==1&&(u._flag=2),n.u.valid(u.onselecting)&&u.onselecting(u)&&n.u.stop(t))};this.mouseUp=function(t){u._flag==2&&(u._flag=0,n.u.valid(u.onselected)&&u.onselected(u)&&n.u.stop(t),u._target=null)}}return Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),t.prototype.enable=function(t){var i=t?n.e.be:n.e.ue;i(n.g.b,"mousedown",this.mouseDown);i(n.g.b,"mousemove",this.mouseMove);i(n.g.b,"mouseup",this.mouseUp)},t}();n.Scrape=t}(ClipWall||(ClipWall={})),function(n){var t=function(){function t(){var t=this;this.overlays=new n.c.List;this.selection=new n.Scrape(function(n){return t.lastPosition=n.position,!0},function(i){var u=i.position,r;return n.u.valid(t.lastPosition)?(r=u.substract(t.lastPosition),n.u.valid(t.dragTarget)?n.updateOverlay(t.dragTarget,0,0,r.x,r.y):(t.dragTarget=n.createOverlay(null),n.updateOverlay(t.dragTarget,t.lastPosition.x,t.lastPosition.y,r.x,r.y)),t.lastPosition=u,!0):(t.lastPosition=u,!0)},function(){return n.u.valid(t.dragTarget)&&(t.clearOverlap(t.dragTarget.getBoundingClientRect()),t.overlays.add(t.dragTarget),t.dragTarget=null),!0})}return Object.defineProperty(t.prototype,"name",{get:function(){return t.Name},enumerable:!0,configurable:!0}),t.prototype.apply=function(){this.selection.enable(!0);n.u.mouseselect(n.g.b,!0)},t.prototype.dispose=function(){this.selection.enable(!1);n.u.mouseselect(n.g.b,!1)},t.prototype.clearOverlap=function(t){for(var i=this.overlays.count-1;i>=0;i--)this.overlap(t,this.overlays.item(i).getBoundingClientRect())&&(n.g.b.removeChild(this.overlays.item(i)),this.overlays.removeAt(i))},t.prototype.overlap=function(){return!0},t.Name="m_drg",t}();n.DragMode=t}(ClipWall||(ClipWall={})),function(n){var t=function(){function t(t){var i=this;this.panel=t;this.scrape=new n.Scrape(function(){return!1},function(){return!1},function(){return i.detectSelection(),!1})}return Object.defineProperty(t.prototype,"name",{get:function(){return t.Name},enumerable:!0,configurable:!0}),t.prototype.apply=function(){this.scrape.enable(!0)},t.prototype.dispose=function(){this.scrape.enable(!1)},t.prototype.detectSelection=function(){if(!n.u.contains(this.panel,this.scrape.target)){var t=this.selectedText();n.u.empty(t)||(n.e.fire("addcontent",t,this.scrape.target),this.highlight("yellow"))}},t.prototype.makeEditableAndHighlight=function(t){var i=n.g.w.getSelection(),r;n.g.d.designMode="on";i.rangeCount&&i.getRangeAt&&(r=i.getRangeAt(0),i.removeAllRanges(),i.addRange(r));n.g.d.execCommand("HiliteColor",!1,t)||n.g.d.execCommand("BackColor",!1,t);n.g.d.designMode="off"},t.prototype.highlight=function(t){if(n.g.w.getSelection)try{document.execCommand("BackColor",!1,t)||this.makeEditableAndHighlight(t)}catch(r){this.makeEditableAndHighlight(t)}else if(n.g.d.selection&&n.g.d.selection.createRange){var i=n.g.d.selection.createRange();i.execCommand("BackColor",!1,t)}},t.prototype.selectedText=function(){if(n.g.w.getSelection){var t=n.g.w.getSelection();if(t.rangeCount&&t.getRangeAt)return t.getRangeAt(0).toString()}else if(n.g.d.selection.createRange)return n.g.d.selection.createRange().text;return""},t.Name="m_sel",t}();n.SelectMode=t}(ClipWall||(ClipWall={}));panel={};loaded||(loaded=!0,ClipWall.Css.load("clip"),panel=ClipWall.Panel.CreatePanel())